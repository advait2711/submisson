<!-- views/feed.ejs -->
<%- include('partials/header') %>

<main class="container">
    <div class="card">
        <h2 class="card-title">Create a new post</h2>
        <form action="/posts" method="POST">
            <div class="form-group">
                <textarea class="form-control" name="text" placeholder="What's on your mind?"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Post</button>
        </form>
    </div>

    <h1>Post Feed</h1>

    <% posts.forEach(function(post) { %>
        <div class="card">
            <p class="card-text"><%= post.text %></p>
            <div class="d-flex justify-content-between align-items-center">
                <p class="card-subtitle">
                    Posted by <a href="/posts/user/<%= post.user %>"><%= post.name %></a> on <%= post.date.toLocaleString('en-US', { dateStyle: 'medium', timeStyle: 'short' }) %>
                </p>
            </div>
        </div>
    <% }); %>
</main>